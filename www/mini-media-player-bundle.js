function _templateObject38(){const e=_taggedTemplateLiteral(["<span class='media-label'>","</span>"]);return _templateObject38=function(){return e},e}function _templateObject37(){const e=_taggedTemplateLiteral(["<iron-icon .icon=","></iron-icon>"]);return _templateObject37=function(){return e},e}function _templateObject36(){const e=_taggedTemplateLiteral(["\n          <mwc-button dense raised columns=","\n            class='media-buttons__button'\n            @click='","'>\n            ","\n            ","\n          </mwc-button>"]);return _templateObject36=function(){return e},e}function _templateObject35(){const e=_taggedTemplateLiteral(["\n      <div class='media-buttons'>\n        ","\n      </div>"]);return _templateObject35=function(){return e},e}function _templateObject34(){const e=_taggedTemplateLiteral(["<span class='media-label'>","</span>"]);return _templateObject34=function(){return e},e}function _templateObject33(){const e=_taggedTemplateLiteral(["<iron-icon .icon=","></iron-icon>"]);return _templateObject33=function(){return e},e}function _templateObject32(){const e=_taggedTemplateLiteral(["\n            <paper-item value=",">\n              ","\n              ","\n            </paper-item>"]);return _templateObject32=function(){return e},e}function _templateObject31(){const e=_taggedTemplateLiteral(["\n      <paper-menu-button class='media-dropdown'\n        noink no-animations horizontal-align vertical-align .noLabelFloat=","\n        @click='","'>\n        <mwc-button class='media-dropdown__button' slot='dropdown-trigger'>\n          <span class='media-dropdown__label'>\n            ","\n          </span>\n          <iron-icon class='media-dropdown__icon' .icon=","></iron-icon>\n        </mwc-button>\n        <paper-listbox slot=\"dropdown-content\" class=\"media-dropdown-trigger\"\n          @click='","'>\n          ","\n        </paper-listbox>\n      </paper-menu-button>"]);return _templateObject31=function(){return e},e}function _templateObject30(){const e=_taggedTemplateLiteral(["\n      <div class='tts flex justify'>\n        <paper-input class='tts__input' no-label-float\n          placeholder=","...\n          @click='","'>\n        </paper-input>\n        <div>\n          <mwc-button class='tts_button' @click='","'>\n            SEND\n          </mwc-button>\n        </div>\n      </div>"]);return _templateObject30=function(){return e},e}function _templateObject29(){const e=_taggedTemplateLiteral(["\n      <div class='vol-control--stateless flex'>\n        ","\n        ","\n        ","\n      </div>"]);return _templateObject29=function(){return e},e}function _templateObject28(){const e=_taggedTemplateLiteral(["\n      <div class='vol-control flex'>\n        <div>\n          ","\n        </div>\n        <paper-slider ?disabled=","\n          @change='","'\n          @click='","'\n          min='0' max="," value=","\n          ignore-bar-touch pin>\n        </paper-slider>\n      </div>"]);return _templateObject28=function(){return e},e}function _templateObject27(){const e=_taggedTemplateLiteral(["\n      ","\n      ","\n      ",""]);return _templateObject27=function(){return e},e}function _templateObject26(){const e=_taggedTemplateLiteral(["\n      ","\n      <div class='flex shuffle'>\n        ","\n      </div>\n      <div class='flex'>\n        ","\n      </div>"]);return _templateObject26=function(){return e},e}function _templateObject25(){const e=_taggedTemplateLiteral(["<paper-item value=",">","</paper-item>"]);return _templateObject25=function(){return e},e}function _templateObject24(){const e=_taggedTemplateLiteral(["\n      <paper-menu-button class='source-menu' slot='dropdown-trigger'\n        .horizontalAlign="," .verticalAlign=","\n        .verticalOffset="," .noAnimations=","\n        @click='","'>\n        ","\n        <paper-listbox slot='dropdown-content' selected=","\n          @click='","'>\n          ","\n        </paper-listbox>\n      </paper-menu-button>"]);return _templateObject24=function(){return e},e}function _templateObject23(){const e=_taggedTemplateLiteral(["\n        <mwc-button class='source-menu__button' slot='dropdown-trigger'>\n          <span class='source-menu__source' display=",">\n            ","\n          </span>\n          <iron-icon .icon=","></iron-icon>\n        </mwc-button>"]);return _templateObject23=function(){return e},e}function _templateObject22(){const e=_taggedTemplateLiteral(["<paper-icon-button class='source-menu__button' slot='dropdown-trigger' .icon=","></paper-icon-button>"]);return _templateObject22=function(){return e},e}function _templateObject21(){const e=_taggedTemplateLiteral(["<span>(master)</span>"]);return _templateObject21=function(){return e},e}function _templateObject20(){const e=_taggedTemplateLiteral(["\n      <paper-checkbox\n        ?checked=","\n        ?disabled=","\n        @click='","'>\n        ","\n        ","\n      </paper-checkbox>"]);return _templateObject20=function(){return e},e}function _templateObject19(){const e=_taggedTemplateLiteral(["Leave"]);return _templateObject19=function(){return e},e}function _templateObject18(){const e=_taggedTemplateLiteral(["Ungroup"]);return _templateObject18=function(){return e},e}function _templateObject17(){const e=_taggedTemplateLiteral(["\n      <div class='speaker-select'>\n        <span>Group speakers</span>\n        ","\n        <div class='buttons'>\n          <mwc-button\n            class='speaker-select__button'\n            raised\n            ?disabled=","\n            @click='","'>\n            ","\n          </mwc-button>\n          <mwc-button\n            class='speaker-select__button'\n            raised\n            ?disabled=","\n            @click='","'>\n            Group all\n          </mwc-button>\n        </div>\n      </div>"]);return _templateObject17=function(){return e},e}function _templateObject16(){const e=_taggedTemplateLiteral(["\n      <paper-icon-button .icon=","\n        ?opaque=","\n        ?color=","\n        @click='","'>\n      </paper-icon-button>"]);return _templateObject16=function(){return e},e}function _templateObject15(){const e=_taggedTemplateLiteral(["\n      ","\n      <div class='power-row flex'>\n        ","\n        ","\n        ","\n        ","\n      </div>"]);return _templateObject15=function(){return e},e}function _templateObject14(){const e=_taggedTemplateLiteral(["\n      <span class='label'>\n        ","\n      </span>"]);return _templateObject14=function(){return e},e}function _templateObject13(){const e=_taggedTemplateLiteral(["\n      <div class='progress' @click=",">\n        <paper-progress class='transiting' value=","\n          max=",">\n        </paper-progress>\n      </div>"]);return _templateObject13=function(){return e},e}function _templateObject12(){const e=_taggedTemplateLiteral(["<span class=",">","</span>"]);return _templateObject12=function(){return e},e}function _templateObject11(){const e=_taggedTemplateLiteral(["<span class=",">","</span>"]);return _templateObject11=function(){return e},e}function _templateObject10(){const e=_taggedTemplateLiteral(["\n          <div>\n            <div class='marquee'>\n              ","\n            </div>\n          </div>"]);return _templateObject10=function(){return e},e}function _templateObject9(){const e=_taggedTemplateLiteral(["\n      <div class='entity__info__media'\n        ?short="," ?scroll=","\n        style='animation-duration: ","s;'>\n        ","\n        ","\n      </div>"]);return _templateObject9=function(){return e},e}function _templateObject8(){const e=_taggedTemplateLiteral(["\n      <div class='entity__info__name'>\n        ","\n        ","\n      </div>"]);return _templateObject8=function(){return e},e}function _templateObject7(){const e=_taggedTemplateLiteral(["\n      <paper-icon-button .icon="," ?color=","\n        @click='","'>\n      </paper-icon-button>"]);return _templateObject7=function(){return e},e}function _templateObject6(){const e=_taggedTemplateLiteral(["\n      <paper-icon-button class='power-button'\n        .icon=","\n        @click='","'\n        ?color=",">\n      </paper-icon-button>"]);return _templateObject6=function(){return e},e}function _templateObject5(){const e=_taggedTemplateLiteral(["\n      <div class='entity__icon'>\n        <ha-icon\n          icon=","\n          ?color=",">\n        </ha-icon>\n      </div>"]);return _templateObject5=function(){return e},e}function _templateObject4(){const e=_taggedTemplateLiteral(["\n        <div class='entity__artwork' ?border=","\n          style='background-image: ",";'\n          state=",">\n        </div>"]);return _templateObject4=function(){return e},e}function _templateObject3(){const e=_taggedTemplateLiteral(["<div class='cover' style='background-image: ",";'></div>"]);return _templateObject3=function(){return e},e}function _templateObject2(){const e=_taggedTemplateLiteral(["\n      <ha-card break="," ?initial=","\n        ?bg="," ?group=","\n        ?more-info="," ?has-title=","\n        artwork="," ?has-artwork="," state=","\n        ?flow="," ?collapse=","\n        content=","\n        @click='","'>\n        <div class='bg'>\n          ","\n        </div>\n        <header>","</header>\n        <div class='player'>\n          <div class='entity flex' ?inactive=",">\n            ","\n            <div class='entity__info'>\n              ","\n              ","\n            </div>\n            <div class='control-row--top flex'>\n              ","\n            </div>\n          </div>\n          <div class='rows'>\n            <div class='control-row flex'>\n              ","\n            </div>\n            ","\n            ","\n            ","\n            ","\n          </div>\n        </div>\n        ","\n      </ha-card>"]);return _templateObject2=function(){return e},e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null==arguments[t]?{}:arguments[t],n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,r[t])})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _templateObject(){const e=_taggedTemplateLiteral(["\n  ha-card {\n    --mmp-accent-color: var(--mini-media-player-accent-color, var(--accent-color, #f39c12));\n    cursor: default;\n    display: flex;\n    background: transparent;\n    overflow: hidden;\n    padding: 0;\n    position: relative;\n  }\n  ha-card[group] {\n    box-shadow: none;\n  }\n  ha-card[more-info] {\n    cursor: pointer;\n  }\n  ha-card[collapse] {\n    overflow: visible;\n  }\n  ha-card:before {\n    content: '';\n    padding-top: 0px;\n    transition: padding-top .5s cubic-bezier(.21,.61,.35,1);\n    will-change: padding-top;\n  }\n  ha-card[initial] .entity__artwork,\n  ha-card[initial] .entity__icon {\n    animation-duration: .001s;\n  }\n  ha-card[initial]:before,\n  ha-card[initial] .player {\n    transition: none;\n  }\n  header {\n    display: none;\n  }\n  mwc-button {\n    --mdc-theme-primary: var(--primary-text-color);\n  }\n  mwc-button[raised] {\n    --mdc-theme-on-primary: var(--primary-text-color);\n    --mdc-theme-primary: transparent;\n    background: rgba(255,255,255,.25);\n  }\n  mwc-button[dense] {\n    box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0,0,0,.12);\n  }\n  ha-card[has-title] header {\n    display: block;\n    font-size: var(--paper-font-headline_-_font-size);\n    font-weight: var(--paper-font-headline_-_font-weight);\n    letter-spacing: var(--paper-font-headline_-_letter-spacing);\n    line-height: var(--paper-font-headline_-_line-height);\n    padding: 24px 16px 16px;\n    position: relative;\n  }\n  ha-card[artwork='full-cover'][has-artwork]:before {\n    padding-top: 56%;\n  }\n  ha-card[artwork='full-cover'][has-artwork][content='music']:before,\n  ha-card[artwork='full-cover-fit'][has-artwork]:before {\n    padding-top: 100%;\n  }\n  .bg {\n    background: var(--paper-card-background-color, white);\n    position: absolute;\n    top: 0; right: 0; bottom: 0; left: 0;\n  }\n  ha-card[group] .bg {\n    background: transparent;\n  }\n  .cover,\n  .cover:before {\n    display: block;\n    opacity: 0;\n    position: absolute;\n    top: 0; right: 0; bottom: 0; left: 0;\n    transition: opacity .75s cubic-bezier(.21,.61,.35,1);\n    will-change: opacity;\n  }\n  .cover {\n    animation: fade-in .5s cubic-bezier(.21,.61,.35,1);\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center center;\n  }\n  .cover:before {\n    background: rgba(0,0,0,.5);\n    content: '';\n  }\n  ha-card[artwork*='full-cover'][has-artwork] .player {\n    background: rgba(0,0,0,.75);\n    background: linear-gradient(to top, rgba(0,0,0,.75) 0%, rgba(0,0,0,.5) 50%, transparent 100%);\n  }\n  ha-card[has-artwork] .cover,\n  ha-card[has-artwork][artwork='cover'] .cover:before,\n  ha-card[bg] .cover {\n    opacity: .999;\n  }\n  ha-card[artwork='default'] .cover {\n    display: none;\n  }\n  ha-card[bg] .cover {\n    display: block;\n  }\n  ha-card[artwork='full-cover-fit'][has-artwork] .cover {\n    background-color: black;\n    background-size: contain;\n  }\n  .player {\n    align-self: flex-end;\n    box-sizing: border-box;\n    position: relative;\n    padding: 16px;\n    transition: padding .25s ease-out;\n    width: 100%;\n    will-change: padding;\n  }\n  ha-card[group] .player {\n    padding: 2px 0;\n  }\n  ha-card[has-title] .player {\n    padding-top: 0;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-icon-button,\n  ha-card[artwork*='cover'][has-artwork] ha-icon,\n  ha-card[artwork*='cover'][has-artwork] .entity__info,\n  ha-card[artwork*='cover'][has-artwork] .entity__info__name,\n  ha-card[artwork*='cover'][has-artwork] mwc-button,\n  ha-card[artwork*='cover'][has-artwork] header,\n  ha-card[artwork*='cover'][has-artwork] .speaker-select > span,\n  ha-card[artwork*='cover'][has-artwork] paper-menu-button mwc-button:focus iron-icon {\n    color: #FFFFFF;\n    border-color: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] mwc-button {\n    --mdc-theme-primary: #FFFFFF;\n    --mdc-theme-on-primary: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-input {\n    --paper-input-container-focus-color: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-checkbox[disabled] {\n    --paper-checkbox-checkmark-color: rgba(0,0,0,.5);\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-checkbox {\n    --paper-checkbox-unchecked-color: #FFFFFF;\n    --paper-checkbox-label-color: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] .media-buttons__button,\n  ha-card[artwork*='cover'][has-artwork] .speaker-select__button {\n    background-color: rgba(255,255,255,.25);\n  }\n  ha-card[artwork*='cover'][has-artwork] mwc-button[raised] {\n    --mdc-theme-primary: transparent;\n    --mdc-theme-on-primary: #FFFFFF;\n  }\n  ha-card[artwork*='cover'][has-artwork] paper-input {\n    --paper-input-container-color: #FFFFFF;\n    --paper-input-container-input-color: #FFFFFF;\n  }\n  .flex {\n    display: flex;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    flex-direction: row;\n  }\n  .justify {\n    -webkit-justify-content: space-between;\n    justify-content: space-between;\n  }\n  .hidden {\n    display: none;\n  }\n  .entity {\n    position: relative;\n  }\n  .entity__info {\n    justify-content: center;\n    display: flex;\n    flex-direction: column;\n    margin-left: 8px;\n    position: relative;\n    overflow: hidden;\n    user-select: none;\n  }\n  .rows {\n    margin-left: 56px;\n    position: relative;\n  }\n  .rows > *:nth-child(2) {\n    margin-top: 0px;\n  }\n  .entity__info__media[short] {\n    max-height: 20px;\n    overflow: hidden;\n  }\n  ha-card[content='movie'] .attr__media_season,\n  ha-card[content='movie'] .attr__media_episode {\n    display: none;\n  }\n  .entity__icon {\n    color: var(--paper-item-icon-color, #44739e);\n  }\n  .entity__artwork, .entity__icon {\n    animation: fade-in .25s ease-out;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    border-radius: 100%;\n    height: 40px;\n    line-height: 40px;\n    margin-right: 8px;\n    min-width: 40px;\n    position: relative;\n    text-align: center;\n    width: 40px;\n    will-change: border-color;\n    transition: border-color .25s ease-out;\n  }\n  .entity__artwork[border] {\n    border: 2px solid var(--primary-text-color);\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n  }\n  .entity__artwork[state='playing'] {\n    border-color: var(--mmp-accent-color);\n  }\n  .entity__info__name,\n  .entity__info__media[short],\n  .source-menu__source,\n  .media-dropdown__label,\n  .media-label,\n  .label {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .entity__info__name {\n    line-height: 20px;\n  }\n  .control-row--top {\n    line-height: 40px;\n  }\n  .entity[inactive] .entity__info__media,\n  .entity__info__name,\n  paper-icon-button,\n  mwc-button {\n    color: var(--primary-text-color);\n    position: relative;\n  }\n  .entity__info__media {\n    color: var(--secondary-text-color);\n    max-height: 6em;\n    word-break: break-word;\n  }\n  .attr__app_name {\n    display: none;\n  }\n  .attr__app_name:first-child {\n    display: inline;\n  }\n  .entity[inactive] .entity__info__media {\n    opacity: .5;\n  }\n  .entity[inactive] .entity__info__media {\n    max-width: 200px;\n  }\n  .entity__info__media[scroll] > span {\n    visibility: hidden;\n  }\n  .entity__info__media[scroll] > div {\n    animation: move linear infinite;\n  }\n  .entity__info__media[scroll] .marquee {\n    animation: slide linear infinite;\n  }\n  .entity__info__media[scroll] .marquee,\n  .entity__info__media[scroll] > div {\n    animation-duration: inherit;\n    visibility: visible;\n  }\n  .entity__info__media[scroll] {\n    animation-duration: 10s;\n    text-overflow: clip !important;\n    mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);\n    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);\n  }\n  .marquee {\n    visibility: hidden;\n    position: absolute;\n    white-space: nowrap;\n  }\n  paper-icon-button[color],\n  ha-icon[color] {\n    color: var(--mmp-accent-color) !important;\n  }\n  ha-card[artwork*='cover'][has-artwork] .entity__info__media {\n    color: var(--mini-media-player-media-cover-info-color, #FFFFFF);\n    opacity: .85;\n  }\n  paper-icon-button {\n    transition: color .25s ease-in-out;\n    will-change: color;\n  }\n  .entity__info__media span:before {\n    content: ' - ';\n  }\n  .entity__info__media span:first-of-type:before {\n    content: '';\n  }\n  .entity__info__media span:empty,\n  .source-menu span:empty {\n    display: none;\n  }\n  .tts {\n    align-items: center;\n    margin-top: 8px;\n  }\n  .tts__input {\n    cursor: text;\n    flex: 1;\n    margin-right: 8px;\n    --paper-input-container-input: {\n      font-size: 1em;\n    };\n  }\n  .tts__button {\n    margin: 0;\n    padding: .4em;\n  }\n  .media-dropdown {\n    box-sizing: border-box;\n    padding: 0;\n    width: 100%;\n    margin-top: 8px;\n  }\n  .media-dropdown__button {\n    border-bottom: 1px solid var(--primary-text-color);\n    border-radius: 0;\n    display: flex;\n    font-size: 1em;\n    justify-content: space-between;\n    margin: 0;\n    opacity: .75;\n    padding: 0 8px 0 0;\n    width: 100%;\n  }\n  .media-dropdown__label {\n    padding: .2em .2em .2em 0;\n    text-align: left;\n    text-transform: none;\n  }\n  .media-dropdown__icon {\n    height: 24px;\n    width: 24px;\n  }\n  .media-buttons {\n    box-sizing: border-box;\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: 8px;\n  }\n  .media-buttons__button {\n    background-color: rgba(255,255,255,.1);\n    box-sizing: border-box;\n    margin: 8px 8px 0 0;\n    min-width: 0;\n    min-width: calc(50% - 8px);\n    flex: 1;\n    overflow: hidden;\n  }\n  .media-buttons__button[columns='0'] {\n    min-width: calc(100% - 8px);\n  }\n  .media-buttons__button[columns='3'] {\n    min-width: calc(33.33% - 8px);\n  }\n  .media-buttons__button[columns='4'] {\n    min-width: calc(25% - 8px);\n  }\n  .media-buttons__button > span {\n    line-height: 24px;\n    text-transform: initial;\n  }\n  .media-buttons__button > *:nth-child(2),\n  .media-dropdown paper-item > *:nth-child(2) {\n    margin-left: 4px;\n  }\n  .control-row--top .vol-control {\n    max-width: 200px;\n  }\n  .control-row--top {\n    flex: 1;\n    justify-content: flex-end;\n    margin-right: 0;\n    margin-left: auto;\n    width: auto;\n    max-width: 100%;\n  }\n  .control-row--top paper-slider {\n    flex: 1;\n    height: 40px;\n    line-height: initial;\n  }\n  .control-row {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n  .control-row > .flex {\n    flex: 1;\n    justify-content: space-between;\n  }\n  .control-row > .shuffle {\n    flex: 3;\n    flex-shrink: 200;\n    justify-content: center;\n  }\n  .control-row > .vol-control {\n    flex: 100;\n  }\n  .vol-control {\n    flex: 1;\n    max-height: 40px;\n  }\n  .speaker-select {\n    display: flex;\n    flex-direction: column;\n  }\n  .speaker-select > span {\n    font-weight: 500;\n    margin-top: 12px;\n    text-transform: uppercase;\n  }\n  .speaker-select paper-checkbox {\n    padding: 8px 0;\n  }\n  .speaker-select .buttons {\n    display: flex;\n  }\n  .speaker-select__button {\n    background-color: rgba(255,255,255,.1);\n    margin: 8px 8px 0 0;\n    min-width: 0;\n    text-transform: uppercase;\n    text-align: center;\n    width: 50%;\n  }\n  .speaker-select > paper-checkbox > span {\n    font-weight: 600;\n  }\n  paper-slider {\n    max-width: 400px;\n    min-width: 100px;\n    width: 100%;\n  }\n  paper-input {\n    opacity: .75;\n    --paper-input-container-color: var(--primary-text-color);\n    --paper-input-container-focus-color: var(--primary-text-color);\n    --paper-input-container: {\n      padding: 0;\n    };\n  }\n  .source-menu {\n    display: flex;\n    align-items: center;\n    height: 40px;\n    line-height: 20px;\n    padding: 0;\n  }\n  paper-menu-button[focused] mwc-button > iron-icon,\n  paper-menu-button[focused] paper-icon-button {\n    color: var(--mmp-accent-color);\n    transform: rotate(180deg);\n  }\n  paper-menu-button mwc-button:focus iron-icon,\n  paper-menu-button mwc-button[focused] iron-icon,\n  paper-menu-button[focused] paper-icon-button[focused] {\n    color: var(--primary-text-color);\n    transform: rotate(0deg);\n  }\n  ha-card[has-artwork][artwork*='cover'] paper-menu-button[focused] paper-icon-button[focused] {\n    color: #FFFFFF;\n  }\n  .source-menu__button {\n    height: 36px;\n    line-height: 20px;\n    margin: 0;\n    min-width: 0;\n  }\n  .source-menu__source {\n    display: block;\n    max-width: 60px;\n    position: relative;\n    width: auto;\n    text-transform: initial;\n  }\n  .source-menu__source[display=\"icon\"] {\n    display: none;\n  }\n  .source-menu__source[display=\"full\"] {\n    max-width: none;\n  }\n  .progress {\n    height: 12px;\n    cursor: pointer;\n    left: 0; right: 0; bottom: 0;\n    position: absolute;\n  }\n  ha-card[group][collapse] .progress {\n    bottom: -2px;\n    height: 5px;\n  }\n  ha-card[group] paper-progress {\n    height: var(--paper-progress-height, 2px);\n  }\n  paper-progress {\n    height: var(--paper-progress-height, 4px);\n    bottom: 0;\n    position: absolute;\n    width: 100%;\n    --paper-progress-active-color: var(--mmp-accent-color);\n    --paper-progress-container-color: rgba(100,100,100,.15);\n    --paper-progress-transition-duration: 1s;\n    --paper-progress-transition-timing-function: linear;\n    --paper-progress-transition-delay: 0s;\n  }\n  ha-card[state='paused'] paper-progress {\n    --paper-progress-active-color: var(--disabled-text-color, rgba(150,150,150,.5));\n  }\n  .label {\n    margin: 0 8px;\n  }\n  .media-dropdown[focused] mwc-button,\n  paper-icon-button[color][opaque],\n  paper-input[focused] {\n    opacity: 1;\n  }\n  .media-dropdown[focused] mwc-button:focus {\n    opacity: .75;\n  }\n  paper-icon-button[opaque],\n  .speaker-select mwc-button[disabled] {\n    opacity: .5;\n  }\n  ha-card[flow] .control-row--top {\n    justify-content: space-between;\n  }\n  ha-card[flow] .power-row {\n    margin-left: auto;\n  }\n  ha-card[flow] .entity__info {\n    display: none;\n  }\n  ha-card[flow] paper-slider,\n  ha-card[flow] .vol-control {\n    width: 100%;\n    max-width: none;\n  }\n  ha-card[break*=\"break\"] .rows {\n    margin-left: 0;\n  }\n  ha-card[break*=\"break\"] .rows > * {\n    padding-left: 8px;\n  }\n  ha-card[break*=\"break\"] .rows > .control-row {\n    padding: 0;\n  }\n  ha-card[break*=\"break\"] .media-dropdown__button {\n    padding-right: 0;\n  }\n  .player div:empty,\n  ha-card[break=\"break-width\"] .source-menu__source,\n  .entity[inactive] .source-menu__source {\n    display: none;\n  }\n  @keyframes slide {\n    100% { transform: translateX(-100%); }\n  }\n  @keyframes move {\n    from { transform: translateX(100%); }\n    to { transform: translateX(0); }\n  }\n  @keyframes fade-in {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }"]);return _templateObject=function(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()})(this,function(){'use strict';function e(e){let t=M.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},M.set(e.type,t));let r=t.stringsArray.get(e.strings);if(void 0!==r)return r;const n=e.strings.join(v);return r=t.keyString.get(n),void 0===r&&(r=new S(e,e.getTemplateElement()),t.keyString.set(n,r)),t.stringsArray.set(e.strings,r),r}function t(e,t){const r=e.element.content,n=e.parts,o=document.createTreeWalker(r,H,null,!1);let a=X(n),i=n[a],s=-1,d=0;const c=[];for(let r=null;o.nextNode();){s++;const e=o.currentNode;for(e.previousSibling===r&&(r=null),t.has(e)&&(c.push(e),null===r&&(r=e)),null!==r&&d++;i!==void 0&&i.index===s;)i.index=null===r?i.index-d:-1,a=X(n,a),i=n[a]}c.forEach(e=>e.parentNode.removeChild(e))}function r(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;const n=e.element.content,o=e.parts;if(null===r||void 0===r)return void n.appendChild(t);const a=document.createTreeWalker(n,H,null,!1);let i=X(o),s=0,d=-1;for(;a.nextNode();){d++;const e=a.currentNode;for(e===r&&(s=G(t),r.parentNode.insertBefore(t,r));-1!==i&&o[i].index===d;){if(0<s){for(;-1!==i;)o[i].index+=s,i=X(o,i);return}i=X(o,i)}}}function n(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];for(let r=0,o=e.length;r<o;r++){const o=e[r];Array.isArray(o)?n(o,t):t.push(o)}return t}function o(e,t){function r(){a&&(a=!1,e()),i&&o()}function n(){we(r)}function o(){var e=Date.now();if(a){if(e-s<2)return;i=!0}else a=!0,i=!1,setTimeout(n,t);s=e}var a=!1,i=!1,s=0;return o}function a(e){return parseFloat(e)||0}function i(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(t,r){var n=e["border-"+r+"-width"];return t+a(n)},0)}function s(e){for(var t=["top","right","bottom","left"],r={},n=0,o=t;n<o.length;n++){var i=o[n],s=e["padding-"+i];r[i]=a(s)}return r}function d(e){var t=e.getBBox();return _(0,0,t.width,t.height)}function c(e){var t=Math.abs,r=Math.round,n=e.clientWidth,o=e.clientHeight;if(!n&&!o)return Fe;var d=Ee(e).getComputedStyle(e),c=s(d),p=c.left+c.right,u=c.top+c.bottom,m=a(d.width),h=a(d.height);if("border-box"===d.boxSizing&&(r(m+p)!==n&&(m-=i(d,"left","right")+p),r(h+u)!==o&&(h-=i(d,"top","bottom")+u)),!l(e)){var g=r(m+p)-n,f=r(h+u)-o;1!==t(g)&&(m-=g),1!==t(f)&&(h-=f)}return _(c.left,c.top,m,h)}function l(e){return e===Ee(e).document.documentElement}function p(e){return ye?Ne(e)?d(e):c(e):Fe}function u(e){var t=e.x,r=e.y,n=e.width,o=e.height,a="undefined"==typeof DOMRectReadOnly?Object:DOMRectReadOnly,i=Object.create(a.prototype);return Pe(i,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),i}function _(e,t,r,n){return{x:e,y:t,width:r,height:n}}const m=new WeakMap,h=e=>"function"==typeof e&&m.has(e),g=window.customElements!==void 0&&window.customElements.polyfillWrapFlushCallback!==void 0,f=function(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,o=t;for(;o!==r;){const t=o.nextSibling;e.removeChild(o),o=t}},b={},y={},v="{{lit-".concat((Math.random()+"").slice(2),"}}"),w="<!--".concat(v,"-->"),x=new RegExp("".concat(v,"|").concat(w)),k="$lit$";class S{constructor(e,t){this.parts=[],this.element=t;let r=-1,n=0;const o=[],a=t=>{const i=t.content,s=document.createTreeWalker(i,133,null,!1);for(let i=0;s.nextNode();){r++;const t=s.currentNode;if(1===t.nodeType){if(t.hasAttributes()){const o=t.attributes;let a=0;for(let e=0;e<o.length;e++)0<=o[e].value.indexOf(v)&&a++;for(;0<a--;){const o=e.strings[n],a=F.exec(o)[2],i=a.toLowerCase()+k,s=t.getAttribute(i),d=s.split(x);this.parts.push({type:"attribute",index:r,name:a,strings:d}),t.removeAttribute(i),n+=d.length-1}}"TEMPLATE"===t.tagName&&a(t)}else if(3===t.nodeType){const e=t.data;if(0<=e.indexOf(v)){const a=t.parentNode,s=e.split(x),d=s.length-1;for(let e=0;e<d;e++)a.insertBefore(""===s[e]?E():document.createTextNode(s[e]),t),this.parts.push({type:"node",index:++r});""===s[d]?(a.insertBefore(E(),t),o.push(t)):t.data=s[d],n+=d}}else if(8===t.nodeType)if(t.data===v){const e=t.parentNode;(null===t.previousSibling||r===i)&&(r++,e.insertBefore(E(),t)),i=r,this.parts.push({type:"node",index:r}),null===t.nextSibling?t.data="":(o.push(t),r--),n++}else for(let e=-1;-1!==(e=t.data.indexOf(v,e+1));)this.parts.push({type:"node",index:-1})}};a(t);for(const r of o)r.parentNode.removeChild(r)}}const P=e=>-1!==e.index,E=()=>document.createComment(""),F=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class N{constructor(e,t,r){this._parts=[],this.template=e,this.processor=t,this.options=r}update(e){let t=0;for(const r of this._parts)void 0!==r&&r.setValue(e[t]),t++;for(const t of this._parts)void 0!==t&&t.commit()}_clone(){const e=g?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=this.template.parts;let r=0,n=0;const o=e=>{const a=document.createTreeWalker(e,133,null,!1);for(let i=a.nextNode();r<t.length&&null!==i;){const e=t[r];if(!P(e))this._parts.push(void 0),r++;else if(n===e.index){if("node"===e.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(i.previousSibling),this._parts.push(e)}else this._parts.push(...this.processor.handleAttributeExpressions(i,e.name,e.strings,this.options));r++}else n++,"TEMPLATE"===i.nodeName&&o(i.content),i=a.nextNode()}};return o(e),g&&(document.adoptNode(e),customElements.upgrade(e)),e}}class T{constructor(e,t,r,n){this.strings=e,this.values=t,this.type=r,this.processor=n}getHTML(){const e=this.strings.length-1;let t="";for(let r=0;r<e;r++){const e=this.strings[r],n=F.exec(e);t+=n?e.substr(0,n.index)+n[1]+n[2]+k+n[3]+v:e+w}return t+this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}const A=e=>null===e||"object"!=typeof e&&"function"!=typeof e;class O{constructor(e,t,r){this.dirty=!0,this.element=e,this.name=t,this.strings=r,this.parts=[];for(let n=0;n<r.length-1;n++)this.parts[n]=this._createPart()}_createPart(){return new C(this)}_getValue(){const e=this.strings,t=e.length-1;let r="";for(let n=0;n<t;n++){r+=e[n];const t=this.parts[n];if(void 0!==t){const e=t.value;if(null!=e&&(Array.isArray(e)||"string"!=typeof e&&e[Symbol.iterator]))for(const n of e)r+="string"==typeof n?n:n+"";else r+="string"==typeof e?e:e+""}}return r+=e[t],r}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class C{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===b||A(e)&&e===this.value||(this.value=e,!h(e)&&(this.committer.dirty=!0))}commit(){for(;h(this.value);){const e=this.value;this.value=b,e(this)}this.value===b||this.committer.commit()}}class V{constructor(e){this.value=void 0,this._pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(E()),this.endNode=e.appendChild(E())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e._insert(this.startNode=E()),e._insert(this.endNode=E())}insertAfterPart(e){e._insert(this.startNode=E()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this._pendingValue=e}commit(){for(;h(this._pendingValue);){const e=this._pendingValue;this._pendingValue=b,e(this)}const e=this._pendingValue;e===b||(A(e)?e!==this.value&&this._commitText(e):e instanceof T?this._commitTemplateResult(e):e instanceof Node?this._commitNode(e):Array.isArray(e)||e[Symbol.iterator]?this._commitIterable(e):e===y?(this.value=y,this.clear()):this._commitText(e))}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_commitNode(e){this.value===e||(this.clear(),this._insert(e),this.value=e)}_commitText(e){const t=this.startNode.nextSibling;e=null==e?"":e,t===this.endNode.previousSibling&&3===t.nodeType?t.data=e:this._commitNode(document.createTextNode("string"==typeof e?e:e+"")),this.value=e}_commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof N&&this.value.template===t)this.value.update(e.values);else{const r=new N(t,e.processor,this.options),n=r._clone();r.update(e.values),this._commitNode(n),this.value=r}}_commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let r,n=0;for(const o of e)r=t[n],void 0===r&&(r=new V(this.options),t.push(r),0==n?r.appendIntoPart(this):r.insertAfterPart(t[n-1])),r.setValue(o),r.commit(),n++;n<t.length&&(t.length=n,this.clear(r&&r.endNode))}clear(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.startNode;f(this.startNode.parentNode,e.nextSibling,this.endNode)}}class z{constructor(e,t,r){if(this.value=void 0,this._pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=r}setValue(e){this._pendingValue=e}commit(){for(;h(this._pendingValue);){const e=this._pendingValue;this._pendingValue=b,e(this)}if(this._pendingValue!==b){const e=!!this._pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=e,this._pendingValue=b}}}class R extends O{constructor(e,t,r){super(e,t,r),this.single=2===r.length&&""===r[0]&&""===r[1]}_createPart(){return new L(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class L extends C{}let I=!1;try{const e={get capture(){return I=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}class B{constructor(e,t,r){this.value=void 0,this._pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=r,this._boundHandleEvent=t=>this.handleEvent(t)}setValue(e){this._pendingValue=e}commit(){for(;h(this._pendingValue);){const e=this._pendingValue;this._pendingValue=b,e(this)}if(this._pendingValue===b)return;const e=this._pendingValue,t=this.value,r=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive);r&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),null!=e&&(null==t||r)&&(this._options=U(e),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=e,this._pendingValue=b}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const U=e=>e&&(I?{capture:e.capture,passive:e.passive,once:e.once}:e.capture);const q=new class{handleAttributeExpressions(e,t,r,n){const o=t[0];if("."===o){const n=new R(e,t.slice(1),r);return n.parts}if("@"===o)return[new B(e,t.slice(1),n.eventContext)];if("?"===o)return[new z(e,t.slice(1),r)];const a=new O(e,t,r);return a.parts}handleTextExpression(e){return new V(e)}},M=new Map,W=new WeakMap,D=(t,r,n)=>{let o=W.get(r);o===void 0&&(f(r,r.firstChild),W.set(r,o=new V(Object.assign({templateFactory:e},n))),o.appendInto(r)),o.setValue(t),o.commit()};(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");const j=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new T(e,r,"html",q)},H=133,G=e=>{let t=11===e.nodeType?0:1;for(const r=document.createTreeWalker(e,H,null,!1);r.nextNode();)t++;return t},X=function(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:-1;for(let r=t+1;r<e.length;r++){const t=e[r];if(P(t))return r}return-1},Y=(e,t)=>"".concat(e,"--").concat(t);let J=!0;"undefined"==typeof window.ShadyCSS?J=!1:"undefined"==typeof window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected.Please update to at least @webcomponents/webcomponentsjs@2.0.2 and@webcomponents/shadycss@1.3.1."),J=!1);const $=e=>t=>{const r=Y(t.type,e);let n=M.get(r);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},M.set(r,n));let o=n.stringsArray.get(t.strings);if(void 0!==o)return o;const a=t.strings.join(v);if(o=n.keyString.get(a),void 0===o){const r=t.getTemplateElement();J&&window.ShadyCSS.prepareTemplateDom(r,e),o=new S(t,r),n.keyString.set(a,o)}return n.stringsArray.set(t.strings,o),o},Q=["html","svg"],K=e=>{Q.forEach(r=>{const n=M.get(Y(r,e));n!==void 0&&n.keyString.forEach(e=>{const r=e.element.content,n=new Set;Array.from(r.querySelectorAll("style")).forEach(e=>{n.add(e)}),t(e,n)})})},Z=new Set,ee=(e,n,o)=>{Z.add(o);const a=e.querySelectorAll("style");if(0===a.length)return void window.ShadyCSS.prepareTemplateStyles(n.element,o);const s=document.createElement("style");for(let t=0;t<a.length;t++){const e=a[t];e.parentNode.removeChild(e),s.textContent+=e.textContent}if(K(o),r(n,s,n.element.content.firstChild),window.ShadyCSS.prepareTemplateStyles(n.element,o),window.ShadyCSS.nativeShadow){const t=n.element.content.querySelector("style");e.insertBefore(t.cloneNode(!0),e.firstChild)}else{n.element.content.insertBefore(s,n.element.content.firstChild);const e=new Set;e.add(s),t(n,e)}},te=(e,t,r)=>{const n=r.scopeName,o=W.has(t),a=t instanceof ShadowRoot&&J&&e instanceof T,i=a&&!Z.has(n),s=i?document.createDocumentFragment():t;if(D(e,s,Object.assign({templateFactory:$(n)},r)),i){const e=W.get(s);W.delete(s),e.value instanceof N&&ee(s,e.value.template,n),f(t,t.firstChild),t.appendChild(s),W.set(t,e)}!o&&a&&window.ShadyCSS.styleElement(t.host)};window.JSCompiler_renameProperty=e=>e;const re={toAttribute(e,t){return t===Boolean?e?"":null:t===Object||t===Array?null==e?e:JSON.stringify(e):e},fromAttribute(e,t){return t===Boolean?null!==e:t===Number?null===e?null:+e:t===Object||t===Array?JSON.parse(e):e}},ne=(e,t)=>t!==e&&(t===t||e===e),oe={attribute:!0,type:String,converter:re,reflect:!1,hasChanged:ne},ae=Promise.resolve(!0),ie=1,se=4,de=8,ce=16,le=32;class pe extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=ae,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,r)=>{const n=this._attributeNameForProperty(r,t);void 0!==n&&(this._attributeToPropertyMap.set(n,r),e.push(n))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;e!==void 0&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:oe;if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const r="symbol"==typeof e?Symbol():"__".concat(e);Object.defineProperty(this.prototype,e,{get(){return this[r]},set(t){const n=this[e];this[r]=t,this.requestUpdate(e,n)},configurable:!0,enumerable:!0})}static finalize(){if(!(this.hasOwnProperty(JSCompiler_renameProperty("finalized",this))&&this.finalized)){const e=Object.getPrototypeOf(this);if("function"==typeof e.finalize&&e.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[])];for(const r of t)this.createProperty(r,e[r])}}}static _attributeNameForProperty(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:ne;return r(e,t)}static _propertyValueFromAttribute(e,t){const r=t.type,n=t.converter||re,o="function"==typeof n?n:n.fromAttribute;return o?o(e,r):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const r=t.type,n=t.converter,o=n&&n.toAttribute||re.toAttribute;return o(e,r)}initialize(){this._saveInstanceProperties()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this._updateState|=le,this._hasConnectedResolver?(this._hasConnectedResolver(),this._hasConnectedResolver=void 0):this.requestUpdate()}disconnectedCallback(){}attributeChangedCallback(e,t,r){t!==r&&this._attributeToProperty(e,r)}_propertyToAttribute(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:oe;const n=this.constructor,o=n._attributeNameForProperty(e,r);if(o!==void 0){const e=n._propertyValueToAttribute(t,r);if(e===void 0)return;this._updateState|=de,null==e?this.removeAttribute(o):this.setAttribute(o,e),this._updateState&=~de}}_attributeToProperty(e,t){if(this._updateState&de)return;const r=this.constructor,n=r._attributeToPropertyMap.get(e);if(n!==void 0){const e=r._classProperties.get(n)||oe;this._updateState|=ce,this[n]=r._propertyValueFromAttribute(t,e),this._updateState&=~ce}}requestUpdate(e,t){let r=!0;if(void 0!==e&&!this._changedProperties.has(e)){const n=this.constructor,o=n._classProperties.get(e)||oe;n._valueHasChanged(this[e],t,o.hasChanged)?(this._changedProperties.set(e,t),!0===o.reflect&&!(this._updateState&ce)&&(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,o))):r=!1}return!this._hasRequestedUpdate&&r&&this._enqueueUpdate(),this.updateComplete}async _enqueueUpdate(){this._updateState|=se;let e;const t=this._updatePromise;this._updatePromise=new Promise(t=>e=t),await t,this._hasConnected||(await new Promise(e=>this._hasConnectedResolver=e));const r=this.performUpdate();null!=r&&"function"==typeof r.then&&(await r),e(!this._hasRequestedUpdate)}get _hasConnected(){return this._updateState&le}get _hasRequestedUpdate(){return this._updateState&se}get hasUpdated(){return this._updateState&ie}performUpdate(){if(this._instanceProperties&&this._applyInstanceProperties(),this.shouldUpdate(this._changedProperties)){const e=this._changedProperties;this.update(e),this._markUpdated(),this._updateState&ie||(this._updateState|=ie,this.firstUpdated(e)),this.updated(e)}else this._markUpdated()}_markUpdated(){this._changedProperties=new Map,this._updateState&=~se}get updateComplete(){return this._updatePromise}shouldUpdate(){return!0}update(){this._reflectingProperties!==void 0&&0<this._reflectingProperties.size&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0)}updated(){}firstUpdated(){}}pe.finalized=!0;const ue="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,_e=Symbol();class me{constructor(e,t){if(t!==_e)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(ue?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const he=e=>{if(e instanceof me)return e.cssText;throw new Error("Value passed to 'css' function must be a 'css' function result: ".concat(e,". Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security."))};(window.litElementVersions||(window.litElementVersions=[])).push("2.0.1");const ge=e=>e.flat?e.flat(1/0):n(e);class fe extends pe{static finalize(){super.finalize(),this._styles=this.hasOwnProperty(JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){const e=this.styles,t=[];if(Array.isArray(e)){const r=ge(e),n=r.reduceRight((e,t)=>(e.add(t),e),new Set);n.forEach(e=>t.unshift(e))}else e&&t.push(e);return t}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0===e.length||(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?ue?this.renderRoot.adoptedStyleSheets=e.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(e){super.update(e);const t=this.render();t instanceof T&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){}}fe.finalized=!0,fe.render=te;var be=function(){function e(e,t){var r=-1;return e.some(function(e,n){return e[0]===t&&(r=n,!0)}),r}return"undefined"==typeof Map?function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function e(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r,n=0,o=this.__entries__;n<o.length;n++)r=o[n],e.call(t,r[1],r[0])},t}():Map}(),ye="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ve=function(){return"undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),we=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ve):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),xe=["top","right","bottom","left","width","height","size","weight"],ke="undefined"!=typeof MutationObserver,Se=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=o(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},e.prototype.connect_=function(){!ye||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ke?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){ye&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t,n=xe.some(function(e){return!!~r.indexOf(e)});n&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Pe=function(e,t){for(var r,n=0,o=Object.keys(t);n<o.length;n++)r=o[n],Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0});return e},Ee=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||ve},Fe=_(0,0,0,0),Ne=function(){return"undefined"==typeof SVGGraphicsElement?function(e){return e instanceof Ee(e).SVGElement&&"function"==typeof e.getBBox}:function(e){return e instanceof Ee(e).SVGGraphicsElement}}(),Te=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=p(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Ae=function(){return function(e,t){var r=u(t);Pe(this,{target:e,contentRect:r})}}(),Oe=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new be,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Ee(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)||(t.set(e,new Te(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Ee(e).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var t=this.observations_;t.has(e)&&(t.delete(e),!t.size&&this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new Ae(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return 0<this.activeObservations_.length},e}(),Ce="undefined"==typeof WeakMap?new be:new WeakMap,Ve=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Se.getInstance(),n=new Oe(t,r,this);Ce.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Ve.prototype[e]=function(){var t;return(t=Ce.get(this))[e].apply(t,arguments)}});var ze=function(){return"undefined"==typeof ve.ResizeObserver?Ve:ve.ResizeObserver}();const Re=function a(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=r.reduce((t,r,n)=>t+he(r)+e[n+1],e[0]);return new me(o,_e)}(_templateObject());customElements.get("mwc-button")||customElements.define("mwc-button",class extends customElements.get("paper-button"){});const Le={shuffle:!0,power_state:!0,artwork_border:!0,icon_state:!0},Ie=[{attr:"media_title"},{attr:"media_artist"},{attr:"media_series_title"},{attr:"media_season",prefix:"S"},{attr:"media_episode",prefix:"E"},{attr:"app_name"}],Be={DEFAULT:"mdi:cast",DROPDOWN:"mdi:chevron-down",GROUP:"mdi:google-circles-communities",MENU:"mdi:menu-down",MUTE:{true:"mdi:volume-off",false:"mdi:volume-high"},NEXT:"mdi:skip-next",PLAY:{true:"mdi:pause",false:"mdi:play"},POWER:"mdi:power",PREV:"mdi:skip-previous",SEND:"mdi:send",SHUFFLE:"mdi:shuffle",STOP:"mdi:stop",VOL_DOWN:"mdi:volume-minus",VOL_UP:"mdi:volume-plus"},Ue=["entity","source","_progress","_pos","_overflow","break","thumbnail","edit"],qe=["media_duration","media_position","media_position_updated_at"];class Me extends fe{constructor(){super(),this._overflow=!1,this.idle=!1,this.break=!0,this.initial=!0,this.picture=!1,this.thumbnail=!1,this.edit=!1}static get properties(){return{_hass:{},config:{},entity:{},source:String,active:Boolean,idle:Boolean,_overflow:Boolean,break:Boolean,initial:Boolean,picture:String,thumbnail:String,edit:Boolean,_progress:Boolean,_pos:Number}}static get styles(){return Re}set hass(e){const t=e.states[this.config.entity];this._hass=e,t&&this.entity!==t&&(this.entity=t,this.active=this._isActive(),this.progress=this._hasProgress())}get hass(){return this._hass}set overflow(e){this._overflow!==e&&(this._overflow=e)}get overflow(){return this._overflow}set progress(e){this._progress!==e&&(this._progress=e,!0===this.progress&&this._updateProgress())}get progress(){return this._progress}set pos(e){this._pos!==e&&(this._pos=e)}get pos(){return this._pos}setConfig(e){if(!e.entity||"media_player"!==e.entity.split(".")[0])throw new Error("Specify an entity from within the media_player domain.");const t=_objectSpread({artwork:"default",info:"default",max_volume:100,more_info:!0,shortcuts:{},source:"default",title:"",toggle_power:!0},e,{hide:_objectSpread({},Le,e.hide),sonos:_objectSpread({show_group_count:!0},e.sonos)});t.max_volume=+t.max_volume||100,t.collapse=t.hide.controls||t.hide.volume,t.info=t.collapse&&"scroll"!==t.info?"short":t.info,t.flow=t.hide.icon&&t.hide.name&&t.hide.info,this.config=t}shouldUpdate(e){const t=Ue.some(t=>e.has(t));return t&&this.entity}firstUpdated(){const e=new ze(e=>{e.forEach(e=>{window.requestAnimationFrame(()=>{"scroll"===this.config.info&&this._computeOverflow(),this._resizeTimer||(this._computeRect(e),this._resizeTimer=setTimeout(()=>{this._resizeTimer=null,this._computeRect(this._resizeEntry)},250)),this._resizeEntry=e})})});e.observe(this.shadowRoot.querySelector(".player")),setTimeout(()=>this.initial=!1,250),this.edit=this.config.sonos.expanded||!1}updated(){"scroll"===this.config.info&&this._computeOverflow()}disconnectedCallback(){clearInterval(this._progressTracker)}render(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this,t=e.config,r=e.entity;const n=this._computeArtwork(),o=this.break?"break-width":t.hide.icon?"break-icon":"none";return j(_templateObject2(),o,this.initial,t.background,t.group,t.more_info,""!==t.title,t.artwork,n,r.state,t.flow,t.collapse,this._computeContent(),t=>this._handleMore(t),this._renderArtwork(n),t.title,!this.active,this._renderIcon(n),this._renderEntityName(),this._renderMediaInfo(),this._renderPowerStrip(),!t.collapse&&this.active?this._renderControlRow():"",t.shortcuts.buttons?this._renderButtons():"",t.shortcuts.list?this._renderList():"",t.tts?this._renderTts():"",this.edit?this._renderGroupList():"",this.progress?this._renderProgress():"")}_computeContent(){return this.entity.attributes.media_content_type||"none"}_computeName(){return this.config.name||this.entity.attributes.friendly_name}_computeNameExtra(){const e=this.entity.attributes.sonos_group;if(this.config.sonos.show_group_count&&e){const t=e.length-1||0;return t?" +".concat(t):""}}_computeArtwork(){const e=this.entity.attributes.entity_picture,t=!!(e&&""!==e&&"none"!==this.config.artwork&&this.active&&!this.idle);return t&&e!==this.picture&&(this._fetchThumbnail(),this.picture=e),!!(t&&this.thumbnail)}_computeIcon(){return this.config.icon?this.config.icon:this.entity.attributes.icon||Be.DEFAULT}_computeOverflow(){const e=this.shadowRoot.querySelector(".marquee");if(e){const t=e.clientWidth>e.parentNode.clientWidth;this.overflow=!!(t&&this.active)&&7.5+e.clientWidth/50}}_computeRect(e){const t=e.contentRect,r=t.left,n=t.width;this.break=n+2*r<390}_renderArtwork(e){if(this.thumbnail||this.config.background){const t=this.config.background&&(!e||"default"===this.config.artwork)?"url(".concat(this.config.background,")"):this.thumbnail;return j(_templateObject3(),t)}}_renderIcon(e){return this.config.hide.icon?void 0:this.active&&e&&"default"===this.config.artwork?j(_templateObject4(),!this.config.hide.artwork_border,this.thumbnail,this.entity.state):j(_templateObject5(),this._computeIcon(),!this.config.hide.icon_state&&(this.active||this.idle))}_renderPowerButton(){return j(_templateObject6(),Be.POWER,t=>this._handlePower(t),!this.config.hide.power_state&&(this.active||this.idle))}_renderButton(e,t){let r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},n=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3];return j(_templateObject7(),e,n,n=>this._callService(n,t,r))}_renderEntityName(){return this.config.hide.name?void 0:j(_templateObject8(),this._computeName(),this._computeNameExtra())}_renderMediaInfo(){if(!this.config.hide.info){const e=Ie.map(e=>_objectSpread({text:this._getAttribute(e.attr),prefix:""},e)).filter(e=>e.text);return j(_templateObject9(),"short"===this.config.info||!this.active,this.overflow,this.overflow,"scroll"===this.config.info?j(_templateObject10(),e.map(e=>j(_templateObject11(),"attr__".concat(e.attr),e.prefix+e.text))):"",e.map(e=>j(_templateObject12(),"attr__".concat(e.attr),e.prefix+e.text)))}}_renderProgress(){return this.idle?void 0:j(_templateObject13(),t=>this._handleSeek(t),this.pos,this.entity.attributes.media_duration)}_renderLabel(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"Unknown";return j(_templateObject14(),this._getLabel(e,t))}_renderIdleStatus(){return this._isPaused()?this._renderButton(Be.PLAY[this._isPlaying()],"media_play_pause"):this._renderLabel("state.media_player.idle","Idle")}_renderShuffleButton(){if("undefined"!=typeof this.entity.attributes.shuffle){const e=!this.entity.attributes.shuffle||!1;return this._renderButton(Be.SHUFFLE,"shuffle_set",{shuffle:e},!e)}}_renderPowerStrip(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this,t=e.config;return"unavailable"===this.entity.state?this._renderLabel("state.default.unavailable","Unavailable"):j(_templateObject15(),this.active&&t.collapse?this._renderControlRow():"",this.idle?this._renderIdleStatus():"",this._renderSource(),t.sonos.entities?this._renderGroupButton():"",t.hide.power?"":this._renderPowerButton())}_renderGroupButton(){const e=!this.entity.attributes.sonos_group||1>=this.entity.attributes.sonos_group.length;return j(_templateObject16(),Be.GROUP,e,this.edit,t=>this._handleGroupButton(t))}_renderGroupList(){const t=this.config.sonos.entities,r=this.entity.attributes.sonos_group||[],n=r[0]||this.config.entity,o=n===this.config.entity;return j(_templateObject17(),t.map(e=>this._renderGroupListItem(e,r,n)),2>r.length,t=>this._handleGroupItemChange(t,o?r:this.config.entity,!1),o?j(_templateObject18()):j(_templateObject19()),!o,r=>this._handleGroupItemChange(r,t.map(e=>e.entity_id),!0))}_renderGroupListItem(t,r,n){const o=t.entity_id===this.config.entity||r.includes(t.entity_id),a=t.entity_id===this.config.entity||n!==this.config.entity;return j(_templateObject20(),o,a,r=>this._handleGroupItemChange(r,t.entity_id,!o),t.name,t.entity_id===n?j(_templateObject21()):"")}_renderSource(){let e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this,t=e.entity;const r=t.attributes.source_list||!1;if(!r||this.config.hide.source)return;const n=t.attributes.source||"",o=r.indexOf(n),a="icon"===this.config.source||this.config.collapse||this.break||this.idle?j(_templateObject22(),Be.DROPDOWN):j(_templateObject23(),this.config.source,this.source||n,Be.DROPDOWN);return j(_templateObject24(),"right","top",40,!0,t=>t.stopPropagation(),a,o,t=>this._handleSource(t,t.target.getAttribute("value")),r.map(e=>j(_templateObject25(),e,e)))}_renderControlRow(){return j(_templateObject26(),this.config.hide.volume?"":this._renderVolControls(),this.config.hide.shuffle?"":this._renderShuffleButton(),this.config.hide.controls?"":this._renderMediaControls())}_renderMediaControls(){return j(_templateObject27(),this._renderButton(Be.PREV,"media_previous_track"),this._renderButton(Be.PLAY[this._isPlaying()],"media_play_pause"),this._renderButton(Be.NEXT,"media_next_track"))}_renderVolControls(){const e=this.entity.attributes.is_volume_muted||!1;return this.config.volume_stateless?this._renderVolButtons(e):this._renderVolSlider(e)}_renderMuteButton(e){if(!this.config.hide.mute){switch(this.config.replace_mute){case"play":return this._renderButton(Be.PLAY[this._isPlaying()],"media_play_pause");case"stop":return this._renderButton(Be.STOP,"media_stop");case"next":return this._renderButton(Be.NEXT,"media_next_track");default:return this._renderButton(Be.MUTE[e],"volume_mute",{is_volume_muted:!e});}}}_renderVolSlider(){let e=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];const t=100*this.entity.attributes.volume_level;return j(_templateObject28(),this._renderMuteButton(e),e,t=>this._handleVolumeChange(t),t=>t.stopPropagation(),this.config.max_volume,t)}_renderVolButtons(){let e=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];return j(_templateObject29(),this._renderMuteButton(e),this._renderButton(Be.VOL_DOWN,"volume_down"),this._renderButton(Be.VOL_UP,"volume_up"))}_renderTts(){return j(_templateObject30(),this._getLabel("ui.card.media_player.text_to_speak","Say"),t=>t.stopPropagation(),t=>this._handleTts(t))}_renderList(){if(!this.config.shortcuts.hide_when_off||this.active){const e=this.config.shortcuts.list;return j(_templateObject31(),!0,t=>t.stopPropagation(),"Select media...",Be.MENU,t=>this._handleQuickSelect(t,"list",t.target.getAttribute("value")),e.map((e,t)=>j(_templateObject32(),t,e.icon?j(_templateObject33(),e.icon):"",e.name?j(_templateObject34(),e.name):"")))}}_renderButtons(){if(!this.config.shortcuts.hide_when_off||this.active){const e=this.config.shortcuts.buttons;return j(_templateObject35(),e.map((e,t)=>j(_templateObject36(),this.config.shortcuts.columns,r=>this._handleQuickSelect(r,"buttons",t),e.icon?j(_templateObject37(),e.icon):"",e.name?j(_templateObject38(),e.name):"")))}}_callService(t,e,r){let n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"media_player";t.stopPropagation();const o=_objectSpread({entity_id:this.config.entity},r);this.hass.callService(n,e,o)}_handleVolumeChange(t){const e=parseFloat(t.target.value),r=0<e?e/100:0,n=this.config.sonos.sync_volume?this.entity.attributes.sonos_group:this.config.entity;this._callService(t,"volume_set",{entity_id:n||this.config.entity,volume_level:r})}_handleSeek(t){const e=this.entity.attributes.media_duration||0,r=t.offsetX/t.target.offsetWidth*e;this._callService(t,"media_seek",{seek_position:r})}_handlePower(t){return this.config.toggle_power?this._callService(t,"toggle"):"off"===this.entity.state?this._callService(t,"turn_on"):void this._callService(t,"turn_off")}_handleTts(t){const e=this.shadowRoot.querySelector(".tts paper-input"),r={message:e.value};this.config.tts.entity_id&&(r.entity_id=this.config.tts.entity_id),this.config.tts.language&&(r.language=this.config.tts.language),"alexa"===this.config.tts.platform?this._callService(t,"alexa_tts",r):"ga"===this.config.tts.platform?this.hass.callService("notify","ga_broadcast",{message:e.value}):this._callService(t,"".concat(this.config.tts.platform,"_say"),r,"tts"),t.stopPropagation(),e.value=""}_handleQuickSelect(t,e,r){const n=this.config.shortcuts[e][r],o=n.type,a=n.id;if("source"===o)return this._handleSource(t,a);if("script"===o)return this._callService(t,"turn_on",{entity_id:a},"script");this._callService(t,"play_media",{media_content_type:o,media_content_id:a})}_handleMore(t){let e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this,r=e.config;return r.more_info?this._fire("hass-more-info",{entityId:r.entity}):void t.stopPropagation()}_handleSource(t,e){this._callService(t,"select_source",{source:e}),this.source=e}_handleGroupButton(t){t.stopPropagation(),this.edit=!this.edit}_handleGroupItemChange(t,e,r){const n={entity_id:e};r?(n.master=this.config.entity,this._callService(t,"SONOS_JOIN",n)):this._callService(t,"SONOS_UNJOIN",n)}_fire(t){let r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};const o=new Event(t,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:!!n.cancelable,composed:void 0===n.composed||n.composed});return o.detail=r,this.dispatchEvent(o),o}_updateProgress(){this.pos=this._computeProgress,this._progressTracker||(this._progressTracker=setInterval(()=>this._updateProgress(),1e3)),this._isPlaying()||(this.progress="paused",clearInterval(this._progressTracker),this._progressTracker=null)}_hasProgress(){return!this.config.hide.progress&&!this.idle&&qe.every(e=>e in this.entity.attributes)}get _computeProgress(){const e=this.entity.attributes.media_position_updated_at,t=this.entity.attributes.media_position;return t+(Date.now()-new Date(e).getTime())/1e3}_isPaused(){return"paused"===this.entity.state}_isPlaying(){return"playing"===this.entity.state}_isIdle(){return"idle"===this.entity.state}_isStandby(){return"standby"===this.entity.state}_isActive(){return this.config.idle_view&&(this.idle=this._computeIdle()),"off"!==this.entity.state&&"unavailable"!==this.entity.state&&!this.idle||!1}_computeIdle(){const e=this.config.idle_view;if(e.when_idle&&this._isIdle()||e.when_standby&&this._isStandby()||e.when_paused&&this._isPaused())return!0;const t=this.entity.attributes.media_position_updated_at;if(!t||!e.after||this._isPlaying())return!1;const r=(Date.now()-new Date(t).getTime())/1e3;return!!(r>60*e.after)||(this._inactiveTracker&&clearTimeout(this._inactiveTracker),this._inactiveTracker=setTimeout(()=>{this.active=this._isActive(),this._inactiveTracker=null},1e3*(60*e.after-r)),!1)}_getAttribute(e){return this.entity.attributes[e]||""}_getLabel(e){let t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"unknown";const r=this.hass.selectedLanguage||this.hass.language,n=this.hass.resources[r];return n&&n[e]?n[e]:t}async _fetchThumbnail(){try{const e=await this.hass.callWS({type:"media_player_thumbnail",entity_id:this.config.entity}),t=e.content_type,r=e.content;this.thumbnail="url(data:".concat(t,";base64,").concat(r,")")}catch(e){this.thumbnail=!1}}getCardSize(){return this.config.collapse?1:2}}customElements.define("mini-media-player",Me)});
